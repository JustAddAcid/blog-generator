---
title: 'Авторитарные замашки у проектировщиков интерфейсов TV'
titleEnabled: false
excerpt: 'Делюсь собственной болью использования LCD-телевизора в качестве монитора на карантине'
coverImage: '/assets/blog/%%POST_NAME%%/background.jpg'
date: '%%CURRENT_DATE%%'
issueId: '%%ISSUE_ID%%'
author:
  name: Roman A. Nosov
  picture: 'https://avatars3.githubusercontent.com/u/21103635?s=120&v=4'
  url: 'https://github.com/JustAddAcid'
ogImage:
  url: '/assets/blog/%%POST_NAME%%/background.jpg'
---

Минутка признания. Больше всего в этом мире я ненавижу "не отключаемые опции". Есть в этом что-то авторитарное. Когда создатель какой-либо системы играет в бога и заявляет: "Я просто знаю, что вот эта функция нужна будет всегда. И не отвертитесь! Будете жрать говно до конца!"

И такое дерьмо проявляется везде: не только в айтишечке, а даже в обычной жизни! Приведу несколько примеров, чтобы вы поняли о чем я говорю:

### Интернет в ADSL-эпоху
Вот пришел ты в нулевые года к интернет-провайдеру и говоришь: "хочу провести себе тырнет по медному проводу аж **5мб/с**, чтобы смотреть ютуб в 480p и орать с демотиваторов."
А тебя заставляют выбирать сразу два тарифа: на интернет и на телефон. Доводы "я не хочу домашний телефон, мне мобилки хватает" -- не работают. И приходится соглашаться с требованиями монополиста -- ростелекома и платить дополнительный прайс за телефон, которым никто и не воспользовался ни разу. 

![Ни единого разрыва](/assets/blog/authoritarian-tv-interfaces/without_disconnects.jpg)

### Прекрасное пенсионное и медицинское страхование в рашке
Для этих штук можно спокойно использовать лозунг "плати и не пользуйся". Никого абсолютно не волнует, что человек может просто не дожить до пенсии. Или человек самостоятельно хочет накопить себе на старость, и не доверяет очень невыгодным вкладам под названием "пенсионный фонд", который уже который год не начисляет проценты. Он просто **не может** отказаться от выплат в фонд.

С медстраховкой аналогичное дерьмо -- ты можешь наблюдаться в частных клиниках за свой счет. **НО** ты **ОБЯЗАН** финансировать безумную и отвратительную систему государственных поликлиник. Зачем? Почему я не могу отказаться выплачивать деньги в фонд, при этом не пользуясь государственной медициной? Потому что какой-то дядька давно решил, что эта опция нужна **всем без исключения**, и её нельзя отключить.

И вот мы подходим к самому главному -- юзабилити интерфейсов. И я считаю, что за отсутствие "выключателя" у основных функций систем пора уже вводить уголовную ответственность ~~хотя, средневековые развлечения с забиванием камнями тоже подойдут~~ .

## Низкий поклон ребяткам из TOSHIBA

Задаю вам школьную задачку. **Дано:**

1. Ковидо-карантин, когда закрыты все магазины = 1шт.
2. Обезьяна, уверенная в том, что она может работать из дома = 1шт.
3. Ноутбук с экраном 1366x768 = 1шт.
4. В меру старенький LCD-телевизор TOSHIBA 19AV501 со странным разрешением 1440x900 и возможностью законнектиться по HDMI 

![TOSHIBA 19AV501](/assets/blog/authoritarian-tv-interfaces/toshiba.jpg)

**Вопрос:** за сколько миллисекунд сгорит стул?

## Суть

![Встал вопрос](/assets/blog/authoritarian-tv-interfaces/question.jpg)

~~Во времена моей молодости~~ Когда начался карантин, *встал вопрос* о том, как реализовать своё рабочее место на дому. Мощностью железок я толком не был ограничен, т.к. подключался по *RDP* к удалённому компьютеру. Но вот с размером экрана ноутбука у меня возникли проблемы: просто физически не помещались нужные окна на крошечный экран, и постоянно переключаться между окнами было чертовски неудобно. 

Поэтому, чтобы хоть как-то сгладить ситуацию, я решил оккупировать ~~Польшу~~ телевизор с кухни и подключить его по *HDMI*. Казалось бы, что может пойти не так в этой ситуации? Берем телевизор, кабель и ноутбук и совмещаем. Но как бы не так! 

Именно в момент соития моего ноутбука и телевизора я узнал ~~откуда взялся оптимус прайм~~ что такое "не отключаемый оверскан". **Оверскан** -- это когда телевизор увеличивает **всю картинку** на +-5% (при том замыливая), а те куски, которые не влезли на экран -- просто отбрасывает, словно их и не было. Т.е. он показывает только середину экрана: без нижней панели с часами, и без шапок окон сверху.

Наверное, при просмотре каких-то телепередач в этом есть смысл, но при работе за компом це пiздец. А в настройках телевизора нет ничего похожего на отключение этого режима. Совсем ничего. И как с этим жить?

## Поиск информации

Вооружившись гуглом и шаманским супер-бубном я принялся искать инфу об этой проблеме. И что вы думаете? Оказывается, что это говно не связано с конкретной моделью телевизоров. Оверскан у **многих** не отключаемый!

Выходит, это не ошибка разработчиков, а какая-то **устоявшаяся практика**. Я уверен, что существует лобби маньяков-проектировщиков интерфейсов, которые наслаждаются страданиями пользователей по всему миру. Казалось бы -- что сложного в добавлении переключателя в меню?

![Маньяки-проектировщики интерфейсов](/assets/blog/authoritarian-tv-interfaces/maniac.jpg)

## Попытки решения

Сразу после подключения *HDMI* к ноутбуку, телевизор даже не рассказывает о том, что его родное разрешение *1440x900*. И пытается запуститься в дефолтном режиме (1920x1080i).

```bash
# Ответ xrandr

HDMI-1 connected
   1920x1080i    50.00 +  60.00    59.94  
   1280x720      60.00    50.00    59.94  
   1440x576      50.00  
   1024x768      75.03    70.07    60.00  
   1440x480      60.00    59.94  
   800x600       72.19    75.00    60.32  
   720x576       50.00  
   720x576i      50.00  
   720x480       60.00    59.94  
   720x480i      60.00    59.94  
   640x480       75.00    72.81    60.00    59.94  

```

Перебрав все режимы из списка я увидел, что в режиме 640x480 всё-таки оверскан отключается! То есть, телевизор умеет это делать. Но такое разрешение совсем никуда не годится. Будем копать дальше. 

А что будет, если ему насильно объявить родное разрешение?

```bash
cvt 1440 900 60 # получаем данные для создания режима 1440х900 60 кадров в секунду

>> # 1440x900 59.89 Hz (CVT 1.30MA) hsync: 55.93 kHz; pclk: 106.50 MHz
>> Modeline "1440x900_60.00"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync

xrandr --newmode "1440x900_60.00"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync

xrandr --addmode HDMI-1 1440x900_60.00 # Добавляем созданный режим к этому подключению
xrandr --output HDMI-1 --mode 1440x900_60.00 # Запускаем
```

И... Ничего! Оверскан продолжает работать. Также на форумах нашел рекомендацию выключить стриминг аудио по hdmi. Казалось бы, при чем здесь оверскан? Но можно попробовать:

```bash
xrandr --output HDMI-1 --set audio force-dvi
```

И опять никакого эффекта. Ни в максимально близком "стандартном" режиме (1280x720), ни в "родном" разрешении.

### Но выход есть! 
~~в окно~~

Покопавшись в интернете и почти-разочаровавшись в этом мире я наткнулся на [совершенно отвлеченный сайт](https://zoom.cnews.ru/goods_card/item/1758052/toshiba-19av501), на котором собраны характеристики этой модельки телевизора.

И там были две очень интересные строки: (Естественно, этой информации не было в официальной инструкции. Потому что страдай.)

![Скриншот с сайта](/assets/blog/authoritarian-tv-interfaces/screenshot.png)

Там есть разделение на *"Поддерживаемые форматы входного сигнала"* и *"Доступные разрешения при подключении к ПК"*. Так чем же они отличаются? 

Как выяснилось методом тыка -- **именно стримингом звука**. Если отключить звук командой, указанной выше, и выставить разрешение из списка *"Доступные разрешения при подключении к ПК"*, то телевизор автоматически переходит в режим "монитора" и начинает отображать картинку в том же размере, как она отправляется с компьютера. 

Но, ЧСХ, среди этого списка "доступных" разрешений **НЕТ родного**. Так что, полностью от мыла **избавиться не удастся**. Но это уже кое-что.

Итоговый скрипт запуска этого монитора в нормальном режиме выглядит следующим образом:

```bash
#! /bin/bash

xrandr --output HDMI-1 --set audio force-dvi
xrandr --newmode "1360x768_60.00"   84.75  1360 1432 1568 1776  768 771 781 798 -hsync +vsync
xrandr --addmode HDMI-1 1360x768_60.00
xrandr --output HDMI-1 --mode 1360x768_60.00
```

Я его не стал вешать на автозапуск, т.к. иногда подключаю другие устройства по hdmi, и у них со стандартными настройками всё в порядке, не хотелось бы ломать с ними связь. Так что, я запускаю скрипт, после подключения конкретно этого телевизора. 

## Финал

Я очень рад, что основные проблемы разрешились и телевизор заработал в приемлемом режиме. Но длительных танцев с бубном можно было бы **избежать**, если бы переключение с режима **"телевизора"** на режим **"монитора"** (без оверскана) происходило нормально в меню телевизора, а не отключением стриминга аудио по hdmi. (Что характерно, на windows его вообще не выключить.)

А отсутствие родного разрешения экрана в списке "поддерживаемых" -- это вообще отдельная шутка инженеров над пользователями. Но с ней можно мириться. 

Всех благ