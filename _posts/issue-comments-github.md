---
title: 'Использование issues в GitHub как движок комментариев'
excerpt: 'Хочу поделиться замечательной идеей: превращения GitHub issues в полноценный движок комментариев для статического блога. Достойная легковесная (и бесплатная!) замена disqus и аналогов.'
coverImage: '/assets/blog/issue-comments-github/cover.png'
date: '2020-05-04T14:15:07.322Z'
issueId: '2'
author:
  name: Roman A. Nosov
  picture: '/assets/blog/authors/romannosov.png'
ogImage:
  url: '/assets/blog/issue-comments-github/cover.png'
---

Хочу поделиться замечательной идеей: превращения **GitHub issues** в полноценный движок комментариев для статического блога. Достойная легковесная (и бесплатная!) замена *disqus* и аналогов.
Для начала, маленькая вводная, с чего всё начиналось:

Был скучный выходной день во время карантина и я лениво читал интернеты в поисках удобного движка комментариев для своего блога. Я уже был готов поддаться маркетингу disqus'a, но внезапно наткнулся на интересную статью:

(http://donw.io/post/github-comments/)

В ней автор анализирует трафик своего сайта и приходит к удручающему выводу: *disqus* настолько активно использует трекеры и прочие запросы на сервер, что в примере автора, увеличивал количество XHR-запросов с 16 до 105! Это совершенно неприемлемо. И в качестве альтернативы, рассказчик предлагает переход к ... GitHub Issues! 

В статье прелагается следующая схема:

1. На каждый пост в блоге открывается *issue в GitHub*
2. Все комментарии создаются непосредственно на сайте *GitHub*
3. При открытии страницы, клиентский JavaScript код получает все комментарии из issue через *issue API*

## Заводим свой ~~трактор~~ велосипед
![Возможно всё, но зачем?](/assets/blog/issue-comments-github/но_зачем.png)

И тут я подумал, что раз уж весь мой блог использует *GitHub Pages* в качестве хостинга, то почему бы не попробовать ещё больше интегрироваться в экосистему гитхаба?

### Предварительный алгоритм работы с комментариями (пока я не автоматизировал деплой):

1. Перед созданием поста, руками создаётся issue, оттуда копируется ID и вставляется в .md-темплейт поста.
2. В исходники страницы добавлен маленький скрипт, который подхватывает этот id страницы и по нему (через Github API получает все комментарии (отрендеренный markdown в html)
3. Рендер комментариев. 
4. Добавление кнопки "создать комментарий", который просто перебрасывает пользователя на страницу GitHub

### Реализация

```javascript
var s = "JavaScript syntax highlighting";
alert(s);
```


Ещё увидимся.